
# Библиотека компонентов для Altium Designer

_______
Библиотека разработана для совместной работы инженеров НГУ. Компоненты проверены и используются в 'боевых' проектах.

![Пример sch](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/sch_example.png)
![Пример pcb](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/3d_pcb_example.png)

Любое использование свободно и "на свой страх и риск".  
Вдохновлено проектом [данного автора](https://github.com/gardarica/altium-library.git).  

# Структура проекта

* AD_Lib
  * Components *- папка с компонентами библиотеки*
    * PCB *- pcb-модели компонентов*
      * Standart *- стандартные футпринты*
      * Custom *- уникальные футпринты*
      * Connector *- соединители*
      * Module *- отдельные модули, например RaspberyPi*
    * Sim *- библиотеки моделей компонентов*
    * Sch *- схематики, сгруппированные по функционалу*
      * ...
    * 3D-body *- 3D-модели компонентов для использования с футпринтами*
  * Template *- шаблоны различного назначения*
    * SchematicPage *- стандартные листы для ЕСКД и ISO*
    * BoardPCB *- шаблоны для печатных плат*
    * Rules *- правила трассировки для разных классов точности*
    * View *- настройки отображения плат, для удобства перехода на новое рабочее место*
    * Settings *- настройки AD, для удобства перехода на новое место*
    * Fonts *- шрифты, для совместимости отображения проектов*
    * BOM *- настройки для генерации ЕСКД-списков*
    * Projects *- настройки проектов*
    * Scripts *- различные внешние скрипты для упрощения работы*

# Установка библиотеки

Скачайте архив с библиотекой или клонируйте репозиторий к себе на локальный диск:

```batch
git clone https://raw.githubusercontent.com/a-styuf/AD_lib.git
```

После этого переходите в папку *Components\\Sch\\...* и видите список файлов библиотеки компонентов:

![Список файлов](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/tree_to_sch.png)

Все библиотеки состоят из следующих файлов:
> .LibPcg *- для сборки всех schlib из отдельной папки (по функционалу) в один файл*
> .SchLib *- по одному для каждого компонента*
> .PcbLib *- по одному для каждого корпуса*
> .step *- по одному для каждого корпуса*

Для установки нужной библиотеки откройте файл с расширением ***.LibPkg*** в Altium Designer, например, ***Connector.LibPkg*** и у вас в дереве проектов появится библиотека и все компоненты внутри неё:

![Пример дерева проекта LibPcg](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/connector_libpcg_example.png)

Теперь нажимайте правой кнопкой мыши на название проекта и выбирайте пункт ***Compile Integrated Library***:
После этого у вас скомпилируется проект библиотеки, автоматически подключится к Altium Designer и появится в списке библиотек:

![меню Compoents](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/ad_component_example.png)

# Правила создания commit-ов

1. По возможности необходимо делать commit-ы как можно чаще. При одновременной работе над одной библиотекой *.LibPc* обязательно возникнит проблема при сливании веток.
2. Рекомендации по название commit-а должно содержать слудующую информацию:
   1. тип изменения: добавление, удаление, изменнеие и т.п.
   2. тип компонента: диод, резистор и т.п.
   3. точное название добавленных компонентов (если таковые были) для возможности поиска
   Пример: "Redraw SD87340-20 footprint" - перерисовка футпринта SD87340-20
3. В случае необходимости точно указать на конкретный коммит. Используется либо название (вероятны повторения), либо первые 6 цифр хеша (предпочтительней).
   Пример: "Redraw SD87340-20 footprint", хеш - **b64c86**0b42efc9c14fcc4e24e4c4e8d4bc5f5b36

# Инструкция для создания схематика компонента

1. Для каждого отдельного компонента (или линейки компонентов с одинаковой нумерацией и количеством пинов) необходимо создавать отдельный *.SchLib* файл.
2. Название файла должно совпадать с названием компонента.
3. Шрифты для всех отображаемых полей и параметров - Isocreup.
4. Поля *General* обязатеьные для заполнения:
   1. Designaotr (Design Item ID, Позиционное обозначение) - по возможности следовать ГОСТ.
   2. Comment - название компонента на латинице.
   3. Description - описание компонента на латинице.
5. Обязательные параметры (*Parameters*):
   1. Назначение - описание компонента на кириллице для отечественных компонентов, на латинице - для остальных.
   2. Наименование - полное название компонента, достаточное для однозначного определения компонента для закупки. Язык параметры: на кириллице для отечественных компонентов, на латинице - для остальных.
   3. Потребление, Вт - потребление компонента, разделитель разрядов - точка (Пример: 0.01).
   4. DataSheet - ссылка на DataSheet компонента, при отсутствии - ссылка на любое другое описание.
6. Необязательные параметры (*Parameters*):
   1. При необходимости допускается создавать любо количество дополнительных полей для описания компонента.
7. *PartChoises* - ссылка на компонент из базы данных AD (при наличии).

![Schematic Lib Properties](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/schematic_lib_properties.png)

# Инструкция для создания футпринта

1. Для каждого отдельного футпринта необходимо создавать отдельный *.PcbLib* файл.
2. Название файла должно совпадать с названием компонента.
3. Центр координат в центре первой ноги (при отсутсвии такой возможности центр координат в геометическом центра футпринта).
4. 3D-модель помещается на 13-й механический слой (*Mechanical 13*).
5. Keepout располагается на 15-м механическом слое (*Mechanical 15*).

# Использование шаблонов (Папка *Teamplate*)

1. Settings *- рекомендуемые настройки Altium Designer*.
2. SchematicPage *- ГОСТ шаблоны Э3 для схем*.
3. Projects *- рекомендованный пример для генерации выходных данных на основе создаваемого проекта (.OutJob)*.
4. BoardPCB *- стэки слоев для плат*.
5. Fonts *- шрифты по ГОСТ, используемые в данной библиотеке*.

# Дополнительные документы (Папка *Documents*)

1. Папка */img* - картинки для описания.
2. Остальное - дополнительный материал по созданию печатных плат.
3. Settings *- рекомендуемые настройки Altium Designer*.

# Полезные видео

1. <https://www.youtube.com/watch?v=vZhALPFB9hw> - краткое видео о способах разводки в PCB
2. <https://youtu.be/BnAOM6Ea2hU?t=435> - видео, показывающее как настраивать сортировку в ActiveBOM

# Устранение ошибки отображения шрифта

В случае некорректного отображения шрифтов необходимо установить шрифты из папки *Template/Fonts* (по умолчанию стандарт **Isocpeur**)

# Решение проблемы с некорректным копирование свойств комнат

 Обычно, данная проблема связана с некорретным Channel Offset.
 ![Channel Offset](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/2023-01-24_10-47-20_channel_offset.png)
 Данный номер - это уникальный номер определяющий порядок расстановки компонентов из отдельной схемына плате. Соответственно для мульти-канального проекта для различных каналов данные номера должжны соответствовать для одинаковых компонентов. При модификации нередко происходит сбой данной нумерации для части каналов (особенно при изменении кол-ва каналов). Для решения проблемы необходимо привести данный номер в соответсвие.
 Один из возможных способов следующий:

 1. Открываем **PCB List** со следующими настройками:

 ![PCB List](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/2023-01-24_10-53-15_PCB_List.png)

 2. Открываем  **PCB Filter** для  последующего поиска необходимых компонентов.
 3. Вводим форму поиска вручную, либо создаем через опцию **Find Similar Objects** используя галочку **Create Expression**:
  
 ![Create Expression](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/2023-01-24_10-59-42_Create_Expression.png)

 4. Используя параметричское задание имени добиваемся выделения одинаковых компонентов интересующих нас комнатах:

 ![Filter Expression](https://raw.githubusercontent.com/a-styuf/AD_lib/master/Documents/img/2023-01-24_11-01-44_FilterExpression.png)

 5. После выделения нужных объектов в **PCB List** появится список интересующих компонентов. Необходимо проверить,что бы у них совпадал Channel Offset; при необходимости поправить.
 6. Итеративно проверить для всех компонентов. После правки проблема с некорректным расположением компонентов должна уйти.


_______

Контакты руководителя проекта: [a-styuf@yandex.ru](a-styuf@yandex.ru)  
